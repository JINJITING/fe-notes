<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 中的浮点数 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="JINJITING 的前端学习笔记。">
    
    <link rel="preload" href="/fe-notes/assets/css/0.styles.7b65c47c.css" as="style"><link rel="preload" href="/fe-notes/assets/js/app.184c0e15.js" as="script"><link rel="preload" href="/fe-notes/assets/js/2.7dd7a667.js" as="script"><link rel="preload" href="/fe-notes/assets/js/17.7d7dd209.js" as="script"><link rel="prefetch" href="/fe-notes/assets/js/10.bd4258d4.js"><link rel="prefetch" href="/fe-notes/assets/js/11.b3b8b2ea.js"><link rel="prefetch" href="/fe-notes/assets/js/12.a8e33728.js"><link rel="prefetch" href="/fe-notes/assets/js/13.b0b27fae.js"><link rel="prefetch" href="/fe-notes/assets/js/14.3c6d5653.js"><link rel="prefetch" href="/fe-notes/assets/js/15.6d1c652e.js"><link rel="prefetch" href="/fe-notes/assets/js/16.70d97a90.js"><link rel="prefetch" href="/fe-notes/assets/js/18.89a1fdd0.js"><link rel="prefetch" href="/fe-notes/assets/js/19.396ed5b6.js"><link rel="prefetch" href="/fe-notes/assets/js/20.2182173b.js"><link rel="prefetch" href="/fe-notes/assets/js/21.0f15d5c2.js"><link rel="prefetch" href="/fe-notes/assets/js/22.f271992f.js"><link rel="prefetch" href="/fe-notes/assets/js/23.56daea8a.js"><link rel="prefetch" href="/fe-notes/assets/js/24.af04785a.js"><link rel="prefetch" href="/fe-notes/assets/js/25.39958e42.js"><link rel="prefetch" href="/fe-notes/assets/js/26.576eae87.js"><link rel="prefetch" href="/fe-notes/assets/js/27.c0497ba9.js"><link rel="prefetch" href="/fe-notes/assets/js/28.d8d33e3b.js"><link rel="prefetch" href="/fe-notes/assets/js/29.1f0661f9.js"><link rel="prefetch" href="/fe-notes/assets/js/3.005312cb.js"><link rel="prefetch" href="/fe-notes/assets/js/30.0c937390.js"><link rel="prefetch" href="/fe-notes/assets/js/31.3b3f443a.js"><link rel="prefetch" href="/fe-notes/assets/js/32.fd176ef0.js"><link rel="prefetch" href="/fe-notes/assets/js/33.e393aa53.js"><link rel="prefetch" href="/fe-notes/assets/js/34.fe588096.js"><link rel="prefetch" href="/fe-notes/assets/js/35.c7b26251.js"><link rel="prefetch" href="/fe-notes/assets/js/36.19b9913d.js"><link rel="prefetch" href="/fe-notes/assets/js/37.3ba4cc2a.js"><link rel="prefetch" href="/fe-notes/assets/js/38.f27e1010.js"><link rel="prefetch" href="/fe-notes/assets/js/4.5d41cd3b.js"><link rel="prefetch" href="/fe-notes/assets/js/5.0006b8ea.js"><link rel="prefetch" href="/fe-notes/assets/js/6.45eda98b.js"><link rel="prefetch" href="/fe-notes/assets/js/7.7762ec61.js"><link rel="prefetch" href="/fe-notes/assets/js/8.955e1480.js"><link rel="prefetch" href="/fe-notes/assets/js/9.e2c71e1e.js">
    <link rel="stylesheet" href="/fe-notes/assets/css/0.styles.7b65c47c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-notes/" class="home-link router-link-active"><!----> <span class="site-name">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-notes/base/np/http/" class="nav-link">
  HTTP
</a></div><div class="nav-item"><a href="/fe-notes/base/es/" class="nav-link router-link-active">
  ES
</a></div><div class="nav-item"><a href="/fe-notes/eng/" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/fe-notes/memo/" class="nav-link">
  备忘录
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-notes/base/np/http/" class="nav-link">
  HTTP
</a></div><div class="nav-item"><a href="/fe-notes/base/es/" class="nav-link router-link-active">
  ES
</a></div><div class="nav-item"><a href="/fe-notes/eng/" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/fe-notes/memo/" class="nav-link">
  备忘录
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fe-notes/base/es/" aria-current="page" class="sidebar-link">ECMAScript</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>变量和作用域</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-中的浮点数"><a href="#js-中的浮点数" class="header-anchor">#</a> JS 中的浮点数</h1> <h2 id="浮点数"><a href="#浮点数" class="header-anchor">#</a> 浮点数</h2> <blockquote><p><strong>浮点</strong>（floating point，FP）是一种对于实数的近似值数值表现法，由一个有效数字（即尾数，mantissa）加上幂数来表示，通常是乘以某个基数的整数次指数得到。以这种表示法表示的数值，称为<strong>浮点数</strong>（floating-point number）。利用浮点进行运算，称为<strong>浮点计算</strong>，这种运算通常伴随着因为无法精确表示而进行的近似或舍入。
一个浮点数 a 由两个数 m 和 e 来表示：a = m × b<sup>e</sup>。在任意一个这样的系统中，我们选择一个基数b（记数系统的基）和精度p（即使用多少位来存储）。m（即尾数）是形如 ±d.ddd...ddd 的 p 位数（每一位是一个介于 0 到 b-1 之间的整数，包括 0 和 b-1）。如果 m 的第一位是非 0 整数，m 称作<strong>正规化</strong>的。有一些描述使用一个单独的符号位（s 代表 + 或者 -）来表示正负，这样 m 必须是正的。e 是指数。
浮点数表示法通常还包括一些特别的数值：+∞ 和 −∞（正负无穷大）以及 NaN（'Not a Number'）。 ... 其中，无穷大，可表示为 inf，在内存中的值是阶码为全 1，尾数全 0。而 NaN 在内存中的值则是阶码全 1，尾数不全 0。</p></blockquote> <blockquote><p>对于任意一个二进制数 N，可用 N=M×2^P 表示，其中 M 为尾数，P 为阶码，2 为阶码的底，M、P 都用二进制数表示，M 表示 N 的全部有效数字，P 指明小数点的位置。当阶码为固定值时，数的这种表示法称为定点表示，这样的数称为“定点数”；当阶码为可变时，数的这种表示法称为浮点表示，这样的数称为“浮点数”。</p></blockquote> <p>π 的浮点数表示如下：3.14 x 10⁰（十进制），1.1001000 x 2¹，其中 1001000 是尾数，1 为 指数。</p> <h2 id="ieee-754"><a href="#ieee-754" class="header-anchor">#</a> IEEE 754</h2> <p>ES 中所有数值都以 IEEE 754 64 位格式存储。如下：<br>
| S  | Exp | Fraction |
| 1  | 11  | 52       |</p> <ul><li>S，sign 为符号位，第 63 位，用来表示正负号。</li> <li>Exp，exponent 为指数位，第 62 至 52 位，用来表示次方数。用偏正值形式表示，偏正值为实际的指数大小与一个固定值（64位的情况是 1023，二进制即 11 1111 1111）的和。双精度的指数部分是 −1022～+1023 加上 1023，指数值的大小从 1～2046（0（2 进位全为0）和2047（2 进位全为1）是特殊值）。浮点小数计算时，指数值减去偏正值将是实际的指数大小。</li> <li>Fraction 为有效数位，51 至 0 位（从右边开始为 0），用来表示精确度。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1111</span>  <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token comment">// 1.0 </span>
<span class="token number">1</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1111</span>  <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token comment">// -1.0</span>
<span class="token number">0</span>  <span class="token number">111</span> <span class="token number">1111</span> <span class="token number">1111</span>  <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token comment">// +Infinity</span>
<span class="token number">1</span>  <span class="token number">111</span> <span class="token number">1111</span> <span class="token number">1111</span>  <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token comment">// -Infinity</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所以 js 中的 <code>0.1 + 0.2</code>，</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1011</span>  <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1010</span> <span class="token comment">// 0.1</span>
<span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1100</span>  <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1010</span> <span class="token comment">// 0.2</span>

<span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1100</span>  <span class="token number">0100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1100</span> <span class="token number">1101</span> <span class="token comment">// 对阶</span>
<span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1100</span>  <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1001</span> <span class="token number">1010</span> 
<span class="token comment">/*            */</span><span class="token number">1</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0110</span> <span class="token number">0111</span> <span class="token comment">// 尾数和，</span>
<span class="token comment">/* 若浮点数的尾数形式为 00.0××…×× 或 11.1××…××，应利用向左规格化使其变为规格化浮点数，尾数每算术左移 1 位，阶码减 1，直到浮点数的尾数变成规格化形式。
 * 若浮点数的尾数形式为 01.××…×× 或 10.××…××，表示尾数求和的结果发生溢出，应利用向右规格化使其变为规格化浮点数，尾数算术右移 1 位，阶码加 1，此时浮点数的尾数就变成了规格化形式。
 */</span>
<span class="token number">0</span>  <span class="token number">011</span> <span class="token number">1111</span> <span class="token number">1101</span>  <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0011</span> <span class="token number">0100</span> <span class="token comment">// 0.1 + 0.2 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">7/14/2021, 10:52:13 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/fe-notes/assets/js/app.184c0e15.js" defer></script><script src="/fe-notes/assets/js/2.7dd7a667.js" defer></script><script src="/fe-notes/assets/js/17.7d7dd209.js" defer></script>
  </body>
</html>
